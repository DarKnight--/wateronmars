{% extends "base.html" %}

{% block title %}
Source: {{ ref_name }}
{% endblock %}

{% block content %}

<h4><img src="http://plus.google.com/_/favicon?domain={{ ref_url }}" style="padding-right:.5em;"/>{{ ref_name }}</h4>

<p><a href="{{ ref_url }}">View on site.</a></p>

<p class="help-block">Feel free to change or complement the information about this source.</p>

<form class="form-horizontal" role="form" action="" method="post">
  {% csrf_token %}
  {% if ref_form.errors %}
  <div class="alert alert-danger">
    <p>Please check the information below.</p>
    {{ ref_form.non_field_errors|safe }}
  </div>
  {% endif %}
  {% for field in ref_form %}
  {% if field.errors %}
  <div class="form-group has-error">
  {%  else %}
  <div class="form-group">
  {% endif %}
    <span class="col-sm-2 control-label">{{ field.label_tag }}</span>
    <span class="col-sm-10">{{ field }} {{ field.errors|safe }}</span>
  </div>
  {% endfor %}
  {% for feed_url, form in feed_forms.items %}
  {% if forloop.first %}
  <p class="help-block">Check the feeds you want to follow (uncheck others).</p>
  {% endif %}
  {% if form.errors %}
  <div class="alert alert-danger">
    <p>Please check the information below.</p>
    {{ feedForms.non_field_errors|safe }}
  </div>
  {% endif %}
  {% for field in form %}
  <div class="form-group">
   </div>    
  {% if field.errors %}
  <div class="form-group has-error">
  {%  else %}
  <div class="form-group">
  {% endif %}
    <span class="col-sm-2 control-label">
      <label>Feed #{{ forloop.counter}}</label>
    </span>
    <p class="form-control-static">
      {{ feed_url }}
    </p>    
  <span class="input-group">
    <div class="checkbox">
      <label> {{ field }}  Following</label>
      {{ field.errors|safe }}
    </div>
  </span>
  </div>
  {% endfor %}
  {% endfor %}
  <div class="form-group">
    <span class="col-sm-offset-2">
      <input type="submit" value="Save changes" class="btn btn-default" />
      <input type="hidden" name="next" value="{{ next }}" class="btn btn-default" />
    </span>
  </div>
</form>

{% endblock %}
